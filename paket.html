<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paket Harga - ABI STUDIO</title>
    <link rel="icon" type="image/png" href="logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 
                        abi: { teal: '#4A6D6D', dark: '#1a1a1a' },
                        promo: '#F97316' 
                    },
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] }
                }
            }
        }

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC9JW1Rc3VFnJRYofHiorqDN4MWHjBrVi0",
            authDomain: "abistudio-db.firebaseapp.com",
            projectId: "abistudio-db",
            storageBucket: "abistudio-db.firebasestorage.app",
            messagingSenderId: "249751405902",
            appId: "1:249751405902:web:6061648be8e6a51a69ca1f"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 16px; scroll-behavior: smooth; }
        
        /* Modal Styles */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(4px); z-index: 9999; align-items: center; justify-content: center; padding: 15px; }
        .modal-content::-webkit-scrollbar { width: 4px; }
        .modal-content::-webkit-scrollbar-thumb { background: #4A6D6D; border-radius: 10px; }
        .animate-up { animation: slideUp 0.3s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Marquee Styles */
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; }
        .marquee-content { display: inline-block; animation: marquee 60s linear infinite; padding-left: 100%; }
        @keyframes marquee { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen pt-10">

    <div class="fixed top-0 w-full z-[60] bg-abi-dark text-white text-[10px] md:text-xs font-bold leading-9 md:leading-10 shadow-md border-b border-white/10">
        <div class="marquee-container">
            <div id="tickerContent" class="marquee-content uppercase tracking-wider"></div>
        </div>
    </div>

    <nav class="fixed w-full top-9 md:top-10 z-[50] bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100 transition-all duration-300">
        <div class="container mx-auto px-6 py-2 flex justify-between items-center">
            <a href="index.html" class="flex items-center">
                <img src="logo.png" alt="ABI STUDIO" class="h-14 w-auto object-contain">
            </a>
            <div class="hidden md:flex space-x-8 text-sm font-bold uppercase tracking-[0.15em] text-gray-700 items-center">
                <a href="index.html" class="hover:text-abi-teal transition pb-1">Home</a>
                <a href="about.html" class="hover:text-abi-teal transition pb-1">About</a>
                <a href="services.html" class="hover:text-abi-teal transition pb-1">Layanan</a>
                <a href="paket.html" class="hover:text-abi-teal transition pb-1 text-abi-teal">Paket</a>
                <a href="portfolio.html" class="hover:text-abi-teal transition pb-1">Portfolio</a>
                <a href="blog.html" class="hover:text-abi-teal transition pb-1">Blog</a>
                <a href="https://wa.me/6285157577465" target="_blank" class="bg-abi-teal text-white px-6 py-2 rounded-full hover:bg-abi-dark transition duration-300 shadow-lg text-xs md:text-sm">Contact</a>
            </div>
            <button class="md:hidden text-abi-teal text-2xl" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div id="mobileMenu" class="hidden md:hidden absolute w-full bg-white text-black py-4 px-6 shadow-2xl border-t">
            <div class="flex flex-col space-y-4 text-sm font-bold uppercase tracking-widest text-center">
                <a href="index.html" class="hover:text-abi-teal py-2">Home</a>
                <a href="about.html" class="hover:text-abi-teal py-2">About Us</a>
                <a href="services.html" class="hover:text-abi-teal py-2">Layanan</a>
                <a href="paket.html" class="hover:text-abi-teal py-2">Paket</a>
                <a href="portfolio.html" class="hover:text-abi-teal py-2">Portfolio</a>
                <a href="blog.html" class="hover:text-abi-teal py-2">Blog</a>
                <a href="https://wa.me/6285157577465" target="_blank" class="bg-abi-teal text-white py-3 rounded-full mt-2">Contact Us</a>
            </div>
        </div>
    </nav>

    <header class="pt-48 pb-24 bg-abi-dark text-white text-center px-6 relative overflow-hidden">
        <div class="absolute inset-0 opacity-20 bg-[url('https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?q=80&w=2000')] bg-cover bg-center"></div>
        <div class="relative z-10">
            <p class="text-sm font-bold uppercase tracking-[0.4em] text-abi-teal mb-4">Pricing Plans</p>
            <h1 class="text-5xl md:text-7xl font-light">Investasi Perencanaan</h1>
            <p class="mt-6 text-gray-300 font-light text-lg max-w-2xl mx-auto">Pilih paket yang sesuai dengan kebutuhan proyek Anda. Transparan, terukur, dan profesional.</p>
        </div>
    </header>

    <section class="py-24 px-6 flex-grow">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-4 gap-6">
            
            <div onclick="openOrder('Paket 1 (Basic)', 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750')" class="bg-white p-10 hover:shadow-xl transition cursor-pointer border-t-4 border-transparent hover:border-abi-teal rounded-2xl flex flex-col h-full">
                <span class="text-sm font-bold text-gray-300">01</span>
                <h4 class="text-2xl font-bold mt-4 mb-2">Basic Plan</h4>
                <p class="text-4xl font-light text-abi-teal mb-8">7rb<span class="text-sm text-gray-400">/mÂ²</span></p>
                <ul class="text-sm text-gray-600 space-y-4 mb-10 flex-grow">
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Denah 2D & 3D</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> 3D Exterior Render</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Revisi Minor 3x</li>
                </ul>
                <button class="w-full py-4 border border-gray-200 text-xs font-bold uppercase tracking-widest hover:bg-abi-teal hover:text-white transition rounded-full mb-8">Pilih Paket</button>
            </div>

            <div onclick="openOrder('Paket 2 (Standard)', 'https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=800')" class="bg-abi-teal text-white p-10 shadow-xl transition cursor-pointer transform md:-translate-y-4 relative rounded-2xl flex flex-col h-full">
                <div class="absolute top-0 right-0 p-4"><span class="bg-white text-abi-teal text-[10px] px-3 py-1 font-bold rounded">BEST SELLER</span></div>
                <span class="text-sm font-bold text-white/50">02</span>
                <h4 class="text-2xl font-bold mt-4 mb-2">Standard</h4>
                <p class="text-4xl font-light mb-8">22rb<span class="text-sm text-white/50">/mÂ²</span></p>
                <ul class="text-sm text-white/90 space-y-4 mb-10 flex-grow">
                    <li class="flex items-start"><i class="fas fa-check text-white mr-3 mt-1"></i> Denah & Tampak Lengkap</li>
                    <li class="flex items-start"><i class="fas fa-check text-white mr-3 mt-1"></i> Potongan & Pola Lantai</li>
                    <li class="flex items-start"><i class="fas fa-check text-white mr-3 mt-1"></i> 3D Modeling Full</li>
                </ul>
                <button class="w-full py-4 bg-white text-abi-teal text-xs font-bold uppercase tracking-widest hover:bg-abi-dark hover:text-white transition rounded-full mb-8">Pilih Paket</button>
            </div>

            <div onclick="openOrder('Paket 3 (Advance)', 'https://images.unsplash.com/photo-1600607687644-c7171b42498f')" class="bg-white p-10 hover:shadow-xl transition cursor-pointer border-t-4 border-transparent hover:border-abi-teal rounded-2xl flex flex-col h-full">
                <span class="text-sm font-bold text-gray-300">03</span>
                <h4 class="text-2xl font-bold mt-4 mb-2">Advance</h4>
                <p class="text-4xl font-light text-abi-teal mb-8">33rb<span class="text-sm text-gray-400">/mÂ²</span></p>
                <ul class="text-sm text-gray-600 space-y-4 mb-10 flex-grow">
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Struktur & MEP Lengkap</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Detail Kusen & Sanitasi</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Paket Standard Include</li>
                </ul>
                <button class="w-full py-4 border border-gray-200 text-xs font-bold uppercase tracking-widest hover:bg-abi-teal hover:text-white transition rounded-full mb-8">Pilih Paket</button>
            </div>

            <div onclick="openOrder('Paket RAB', 'https://images.unsplash.com/photo-1554224155-8d04cb21cd6c')" class="bg-white p-10 hover:shadow-xl transition cursor-pointer border-t-4 border-transparent hover:border-gray-800 rounded-2xl flex flex-col h-full">
                <span class="text-sm font-bold text-gray-300">04</span>
                <h4 class="text-2xl font-bold mt-4 mb-2">RAB Only</h4>
                <p class="text-4xl font-light text-gray-800 mb-8">10rb<span class="text-sm text-gray-400">/mÂ²</span></p>
                <ul class="text-sm text-gray-600 space-y-4 mb-10 flex-grow">
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Analisis Harga Satuan</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Kebutuhan Material</li>
                    <li class="flex items-start"><i class="fas fa-check text-abi-teal mr-3 mt-1"></i> Format SPK</li>
                </ul>
                <button class="w-full py-4 border border-gray-200 text-xs font-bold uppercase tracking-widest hover:bg-abi-dark hover:text-white transition rounded-full mb-8">Pilih Paket</button>
            </div>

        </div>
    </section>

    <footer class="bg-abi-dark text-white py-12 text-center text-sm mt-auto">
        <p class="opacity-50 uppercase tracking-[0.2em]">Â© 2026 ABI STUDIO. All Rights Reserved.</p>
    </footer>

    <div id="orderModal" class="modal-overlay">
        <div class="bg-white w-full max-w-4xl rounded-2xl overflow-hidden shadow-2xl flex flex-col md:flex-row relative animate-up max-h-[95vh]">
            
            <button onclick="closeOrder()" class="absolute top-3 right-3 z-30 w-9 h-9 flex items-center justify-center rounded-full bg-white/80 border border-gray-200 text-gray-800 text-xl shadow-sm transition hover:bg-gray-100">Ã—</button>
            
            <div class="md:w-2/5 h-32 md:h-auto relative hidden sm:block">
                <img id="modalImg" src="" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-abi-teal/20"></div>
            </div>

            <div class="modal-content md:w-3/5 p-6 md:p-12 overflow-y-auto">
                <h4 id="modalTitle" class="text-2xl md:text-3xl font-bold mb-1 text-abi-dark leading-tight">Nama Paket</h4>
                <p class="text-[10px] md:text-xs uppercase tracking-widest text-gray-400 mb-6">Lengkapi Detail Proyek</p>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase">Nama Anda</label>
                        <input type="text" id="clientName" placeholder="Contoh: Budi Santoso" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent">
                    </div>
                    
                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase">No. WhatsApp / HP</label>
                        <input type="tel" id="clientPhone" placeholder="Contoh: 08123456789" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-[10px] font-bold text-gray-400 uppercase">Luas (mÂ²)</label>
                            <input type="number" id="area" placeholder="150" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-gray-400 uppercase">Lokasi Proyek</label>
                            <input type="text" id="location" placeholder="Kecamatan, Kota" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent">
                        </div>
                    </div>

                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase">Kategori Layanan</label>
                        <select id="type" onchange="updateSubOptions()" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent text-gray-600 font-bold">
                            <option value="" disabled selected>Pilih Layanan Utama</option>
                            <optgroup label="Layanan Desain">
                                <option value="Desain Arsitektur">Desain Arsitektur</option>
                                <option value="Desain Interior">Desain Interior</option>
                                <option value="Desain Struktur">Desain Struktur</option>
                                <option value="Desain Landscape">Desain Landscape</option>
                                <option value="Desain MEP">Desain MEP</option>
                            </optgroup>
                            <optgroup label="Layanan Kontraktor">
                                <option value="Pekerjaan Sipil">Pekerjaan Sipil & Bangunan</option>
                                <option value="Struktur Beton/Baja">Struktur Beton & Baja</option>
                                <option value="Renovasi Bangunan">Renovasi & Rehabilitasi</option>
                                <option value="Fit Out Interior">Fit Out Interior</option>
                                <option value="Pekerjaan Finishing">Arsitektural & Finishing</option>
                                <option value="Maintenance">Pemeliharaan & Perawatan</option>
                            </optgroup>
                            <optgroup label="Layanan Konsultan">
                                <option value="Legal & Perizinan">Konsultan Perizinan</option>
                                <option value="Supervisi Proyek">Supervisi & Manajemen Proyek</option>
                                <option value="Studi Kelayakan & RAB">Studi Kelayakan & RAB</option>
                                <option value="Audit Teknis">Audit Teknis Bangunan</option>
                            </optgroup>
                        </select>
                    </div>

                    <div id="subOptionContainer" class="hidden animate-up">
                        <label class="text-[10px] font-bold text-abi-teal uppercase">Detail Paket / Tipe</label>
                        <select id="subType" class="w-full border-b border-abi-teal py-2 text-sm focus:outline-none bg-abi-teal/5 text-gray-800 rounded px-2 mt-1">
                            </select>
                    </div>

                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase mt-2 block">Rencana Bangun</label>
                        <input type="text" id="date" placeholder="Contoh: Bulan Depan" class="w-full border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-abi-teal transition bg-transparent">
                    </div>

                    <button onclick="sendWhatsApp()" class="w-full bg-abi-teal text-white py-4 rounded-xl font-bold text-xs uppercase tracking-[0.2em] hover:bg-abi-dark transition duration-300 mt-6 shadow-lg transform active:scale-95">Kirim WhatsApp</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DATA OPSI DARI RAMA
        const serviceOptions = {
            "Desain Arsitektur": [
                "Paket Basic",
                "Paket Standard",
                "Paket Premium"
            ],
            "Desain Interior": [
                "Paket Basic (3D View) - 25rb/mÂ²",
                "Paket Advance (3D + DED) - 50rb/mÂ²"
            ],
            "Desain Struktur": [
                "Gedung (8.5rb - 15rb/mÂ²)",
                "Baja (8.5rb - 15rb/mÂ²)",
                "Pabrik (8.5rb - 15rb/mÂ²)",
                "Dermaga (8.5rb - 15rb/mÂ²)",
                "Jalan (150rb/mÂ¹)",
                "Jembatan (150rb/mÂ¹)"
            ],
            "Desain Landscape": [
                "Type Hunian - 15rb/mÂ²",
                "Type Komersil - 15rb/mÂ²"
            ],
            "Desain MEP": [
                "Elektrikal - 15rb/mÂ²",
                "Plumbing - 15rb/mÂ²"
            ],
            "Pekerjaan Sipil": [
                "Rumah Tinggal",
                "Ruko / Kantor",
                "Sarana Pendidikan",
                "Sarana Ibadah",
                "Gedung Bertingkat"
            ],
            "Struktur Beton/Baja": [
                "Penambahan Ruang / Lantai",
                "Pergudangan",
                "Mezzanine",
                "Penguatan Struktur",
                "Struktur Tangga / Kanopi Baja"
            ],
            "Renovasi Bangunan": [
                "Perbaikan Atap / Dak",
                "Perbaikan Dapur",
                "Perbaikan Plafon / Dinding",
                "Renovasi Kamar Mandi",
                "Perbaikan Struktur Ringan"
            ],
            "Fit Out Interior": [
                "Ruang Hunian",
                "Komersial / Toko",
                "Perkantoran",
                "Cafe",
                "Klinik"
            ],
            "Pekerjaan Finishing": [
                "Elemen Eksterior (Kanopi, Pagar, Kolam)",
                "Elemen Interior (Pintu, Jendela, Studio)"
            ],
            "Maintenance": [
                "Pengecatan Ulang",
                "Perbaikan Kebocoran",
                "Perawatan Atap",
                "Sanitary",
                "Perawatan Berkala Gedung"
            ],
            "Legal & Perizinan": [
                "PBG (Persetujuan Bangunan Gedung)",
                "SLF (Sertifikat Laik Fungsi)",
                "IMB Lama ke PBG",
                "Pendampingan Perizinan"
            ],
            "Supervisi Proyek": [
                "Kontrol Mutu, Waktu & Biaya",
                "Laporan Berkala (Harian/Mingguan/Bulanan)"
            ],
            "Studi Kelayakan & RAB": [
                "Paket Sipil - 10rb/mÂ²",
                "Paket Interior - 10rb/mÂ²"
            ],
            "Audit Teknis": [
                "Audit Struktur",
                "Audit Fungsi Bangunan"
            ]
        };

        // FUNGSI UPDATE SUB-OPSI
        function updateSubOptions() {
            const mainType = document.getElementById('type').value;
            const subSelect = document.getElementById('subType');
            const subContainer = document.getElementById('subOptionContainer');

            // Kosongkan opsi lama
            subSelect.innerHTML = "";

            if (serviceOptions[mainType]) {
                // Munculkan container
                subContainer.classList.remove('hidden');
                
                // Tambah opsi default
                const defaultOpt = document.createElement('option');
                defaultOpt.text = "-- Pilih Detail Paket --";
                defaultOpt.disabled = true;
                defaultOpt.selected = true;
                subSelect.add(defaultOpt);

                // Loop data dari Rama
                serviceOptions[mainType].forEach(opt => {
                    const option = document.createElement('option');
                    option.value = opt;
                    option.text = opt;
                    subSelect.add(option);
                });
            } else {
                subContainer.classList.add('hidden');
            }
        }

        // === LOGIC PAGE LOAD ===
        window.onload = function() {
            updateTickerDisplay(); 
            const urlParams = new URLSearchParams(window.location.search);
            const serviceType = urlParams.get('service');
            
            if(serviceType) {
                // Auto-fill logic based on URL params (Sama seperti sebelumnya)
                // Saya sederhanakan mappingnya untuk brevity, tapi tetap jalan
                let autoSelectType = "";
                let customTitle = "Konsultasi Layanan";
                let customImg = "https://images.unsplash.com/photo-1600585154340-be6161a56a0c";

                const map = {
                    'arsitek': ['Desain Arsitektur', 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750'],
                    'interior': ['Desain Interior', 'https://images.unsplash.com/photo-1618221195710-dd6b41faaea6'],
                    'struktur': ['Desain Struktur', 'https://images.unsplash.com/photo-1531834685032-c34bf0d84c7c'],
                    'landscape': ['Desain Landscape', 'https://images.unsplash.com/photo-1558904541-efa843a96f01'],
                    'mep': ['Desain MEP', 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e'],
                    'kontraktor_sipil': ['Pekerjaan Sipil', 'https://images.unsplash.com/photo-1632759132029-2342df220551'],
                    'kontraktor_baja': ['Struktur Beton/Baja', 'https://images.unsplash.com/photo-1565008447742-97f6f38c985c'],
                    'renovasi': ['Renovasi Bangunan', 'https://images.unsplash.com/photo-1581094794329-cd13693dd462'],
                    'fitout': ['Fit Out Interior', 'https://images.unsplash.com/photo-1497366216548-37526070297c'],
                    'finishing': ['Pekerjaan Finishing', 'https://images.unsplash.com/photo-1620626012053-93f537236872'],
                    'maintenance': ['Maintenance', 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a'],
                    'legal': ['Legal & Perizinan', 'https://images.unsplash.com/photo-1554224154-260327c00c4b'],
                    'supervisi': ['Supervisi Proyek', 'https://images.unsplash.com/photo-1531816458010-fb7685eec548'],
                    'rab': ['Studi Kelayakan & RAB', 'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40'],
                    'audit': ['Audit Teknis', 'https://images.unsplash.com/photo-1581093450021-4a7360e9a6b5']
                };

                if(map[serviceType]) {
                    autoSelectType = map[serviceType][0];
                    customTitle = autoSelectType;
                    customImg = map[serviceType][1];
                }

                openOrder(customTitle, customImg);
                
                // Set timeout agar DOM render dulu baru value di-set
                setTimeout(() => { 
                    const typeSelect = document.getElementById('type');
                    typeSelect.value = autoSelectType; 
                    // Trigger manual change event agar sub-opsi muncul
                    typeSelect.dispatchEvent(new Event('change'));
                }, 200);
            }
        }

        // === TICKER LOGIC ===
        const fakeBuyers = ["YUNI ZAIDAH", "MUHAMMAD FAIZAL", "SITI AMINAH", "CV. BERKAH JAYA", "RUDI HARTONO", "ANDI PRATAMA", "DEWI SARTIKA", "PT. BANGUN INDAH"];
        function maskName(name) { return name.length <= 4 ? name : `${name.slice(0, 3)}********${name.slice(-3)}`; }
        
        function updateTickerDisplay() {
            const container = document.getElementById('tickerContent');
            let htmlContent = "";
            fakeBuyers.forEach(buyer => {
                const masked = maskName(buyer);
                const randomAction = Math.random() > 0.5 ? "memesan PAKET STANDARD" : "konsultasi RENOVASI";
                htmlContent += `<span class="mx-8"><i class="fas fa-check-circle text-white/70 mr-2"></i> ${masked} ${randomAction}</span>`;
            });
            container.innerHTML = htmlContent + htmlContent;
        }

        // === MODAL & MENU ===
        function toggleMobileMenu() { document.getElementById('mobileMenu').classList.toggle('hidden'); }
        
        let selectedPkg = "";
        function openOrder(pkg, img) { 
            selectedPkg = pkg; 
            document.getElementById('modalTitle').innerText = pkg; 
            document.getElementById('modalImg').src = img || 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c'; 
            document.getElementById('orderModal').style.display = 'flex'; 
            document.body.style.overflow = 'hidden'; 
        }
        
        function closeOrder() { 
            document.getElementById('orderModal').style.display = 'none'; 
            document.body.style.overflow = 'auto'; 
            window.history.pushState({}, document.title, window.location.pathname);
        }

        window.onclick = function(e) { if(e.target == document.getElementById('orderModal')) closeOrder(); }

        // === WHATSAPP SEND ===
        function sendWhatsApp() {
            const name = document.getElementById('clientName').value.toUpperCase();
            const phone = document.getElementById('clientPhone').value; 
            const area = document.getElementById('area').value; 
            const location = document.getElementById('location').value; 
            const date = document.getElementById('date').value;
            
            // Ambil value dari dropdown utama dan sub-dropdown
            const type = document.getElementById('type').value; 
            const subType = document.getElementById('subType').value;

            if(!name || !phone || !area || !location || !type) { 
                alert("Mohon lengkapi data (Nama, WA, Luas, Lokasi, Layanan)."); 
                return; 
            }
            
            const btn = document.querySelector('button[onclick="sendWhatsApp()"]');
            btn.innerText = "Memproses...";
            btn.disabled = true;

            const msg = `Halo ABI Studio,%0A` + 
                        `Saya tertarik dengan layanan:%0A` + 
                        `ðŸ“ *${type}*%0A` + 
                        `ðŸ‘‰ *${subType}*%0A` + 
                        `--------------------------------%0A` +
                        `ðŸ‘¤ Nama : ${name}%0A` + 
                        `ðŸ“± No. WA : ${phone}%0A` +  
                        `ðŸ“ Luas : ${area} mÂ²%0A` + 
                        `ðŸ“ Lokasi : ${location}%0A` + 
                        `ðŸ“… Rencana : ${date}%0A` + 
                        `--------------------------------%0A` +
                        `Mohon info estimasi biaya. Terima kasih.`;
            
            const waLink = `https://wa.me/6285157577465?text=${msg}`;

            db.collection("leads").add({
                nama_klien: name,
                no_hp: phone,
                layanan_utama: type,
                detail_paket: subType,
                luas_bangunan: area,
                lokasi: location,
                rencana_bangun: date,
                waktu_input: new Date()
            })
            .then(() => {
                fakeBuyers.unshift(name); 
                if(fakeBuyers.length > 15) fakeBuyers.pop(); 
                updateTickerDisplay();
                window.location.href = waLink;
            })
            .catch((error) => {
                console.error("Error DB:", error);
                alert("Koneksi database sibuk, mengalihkan ke WhatsApp...");
                window.location.href = waLink;
            });
        }
    </script>
</body>
</html>
